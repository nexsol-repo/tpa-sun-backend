제공해주신 '정책 및 비즈니스 로직 (v1.1)' 문서를 바탕으로, 가독성을 높이고 개발 및 기획 단계에서 참고하기 좋도록 **마크다운(Markdown)** 형식으로 정리해 드립니다.

---

# 정책 및 비즈니스 로직 (Policy & Business Logic)

> **문서 정보**
> * **버전:** v1.1
> * **최종 수정일:** 2025.12.04 (엑셀 산출식 기준)
> * **적용 대상:** 태양광 발전소 종합공제(보험) 플랫폼

---

## 1. 인증 및 계정 정책 (Auth Policy)

### 1.1. 로그인 및 가입
* **로그인 방식:** `사업자등록번호(BizNo)` + `이메일(Email)` 인증을 통한 **무비번(Passwordless)** 로그인.
* **계정 식별 구조:**
    * **Primary Key:** 사업자등록번호 + 이메일.
    * **N:N 구조:** 하나의 사업자등록번호에 여러 명의 담당자(이메일)가 존재 가능.
    * **권한 분리:** 발전소 관리의 주체는 '사업자번호'이나, 시스템 접근 권한은 '이메일' 단위로 부여.

### 1.2. 정보 수정 정책
* **사업자 정보 (Immutable):** 최초 가입 시 입력한 사업자번호, 상호명 등은 가입 후 **수정 불가**.
* **담당자/신청자 정보 (Mutable):** 마이페이지를 통해 연락처, 이메일 등 개인 정보 **수정 가능**.

---

## 2. 보험 가입 프로세스 정책 (Subscription Flow)
보험 가입은 단계별 데이터 입력 및 임시저장을 지원하며, 리스크 관리 차원에서 특정 조건 충족 시 온라인 가입이 즉시 차단됩니다.

### 2.1. 가입 불가(Reject) 조건 (Stop Condition)
다음 3가지 조건 중 하나라도 해당될 경우, 프로세스를 중단하고 **"별도 문의"** 팝업을 노출합니다.

| 구분 | 조건 (Criteria) | 비고 |
| :--- | :--- | :--- |
| **ESS 설치 여부** | **설치 (Yes)** | ESS 포함 시 온라인 인수 불가 |
| **재물손해(MD) 가입금액** | **30억 원 초과** | 30억 원까지는 가입 가능 |
| **배상책임(GL) 가입금액** | **10억 원 초과** | 10억 원까지는 가입 가능 |

### 2.2. 첨부 파일 정책
* **허용 확장자:** PDF Only (`.pdf`)
* **필수 서류:**
    1.  사업자등록증
    2.  발전사업 허가증

---

## 3. 보험료 산출 로직 (Calculation Logic)
보험료는 실시간으로 산출되며, 모든 계산식은 **25년 12월 04일 확정된 엑셀 산출식**을 따릅니다.

$$\text{총 보험료} = \text{MD 보험료} + \text{BI 보험료} + \text{GL 보험료}$$

### 3.1. 산출 변수 보정 (Implicit Rules)
사용자 입력 값의 누락이나 불확실성을 보정하기 위한 암묵지 로직입니다.

* **면적(Area) 역산 로직:**
  사용자가 면적을 미입력한 경우, 설비 용량을 기준으로 추정합니다.
  $$\text{면적}(m^2) = \text{설비용량}(kW) \times 4.93$$

* **설비 형태(Facility Type) 판별 로직:**
    * 입력 텍스트에 **"지붕"** 단어 포함 → **지붕형** (할증 적용)
    * 그 외 (평지, 농지, 야산, 수상 등) → **일반**

### 3.2. 담보별 상세 산출 공식

#### A. 재물손해 (MD) & 기업휴지 (BI)
설치 지역에 따른 정밀 요율(소수점 3자리)을 적용합니다.

**[지역별 요율표 (Rate Table)]**

| 지역 구분 | MD 요율 | BI 요율 |
| :--- | :---: | :---: |
| **전라 / 경상** | 0.150% | 0.262% |
| **제주** | 0.173% | 0.274% |
| **그 외 지역** | 0.151% | 0.235% |

**[산출식]**
$$\text{MD 보험료} = \text{재물가입금액} \times \text{MD요율}$$
$$\text{BI 보험료} = \text{휴지가입금액} \times \text{BI요율}$$

#### B. 배상책임 (GL)
면적 구간별 기본료(Base Rate)에 가입금액 계수와 설비형태 계수를 곱하여 산출합니다.

$$\text{GL 보험료} = \text{기본료}_{\text{(면적)}} \times \text{계수}_{\text{(가입금액)}} \times \text{계수}_{\text{(설비형태)}}$$

**1) 기본료 (Base Rate Table)**
발전소 면적($m^2$) 구간에 따라 기본료가 결정됩니다.

| 면적 구간 ($m^2$) | 기본료 (원) |
| :--- | :--- |
| 750 미만 | 60,000 |
| 750 이상 ~ 1,250 미만 | 60,000 |
| 1,250 이상 ~ 1,750 미만 | 76,000 |
| 1,750 이상 ~ 2,250 미만 | 101,000 |
| 2,250 이상 ~ 2,750 미만 | 126,000 |
| *(이후 500 $m^2$ 단위 증가 시)* | *(약 +25,000원 씩 증가)* |

**2) 적용 계수 (Coefficients)**

* **설비 형태 계수 (Surcharge)**
    * 지붕형 ("지붕" 포함): **1.2**
    * 그 외 (일반): **1.0**

* **가입금액 계수 (Limit Factor)**
    * 1억 원: **1.00**
    * 2억 원: **1.14**
    * 3억 원: **1.18**
    * 5억 원: **1.25**
    * 5억 초과 ~ 10억 이하: **1.40**

---

## 4. UI/UX 정책 (Frontend Policy)

* **주소-지역 매핑:**
    * 주소 검색 API(카카오/행안부) 결과에서 시/도 정보를 추출하여 요율표의 '설치 지역'란에 자동 매핑해야 합니다.
    * *Example:* 전라남도 나주시... → **전라**로 매핑

* **리스트 정렬 및 페이징:**
    * 대상: 마이페이지 내 '가입 내역', '사고 접수 내역'.
    * 페이징: 기본 **10개**씩 노출.
    * 정렬: 테이블 헤더 클릭 시 **Server-side Sorting** 지원 필수.

---
